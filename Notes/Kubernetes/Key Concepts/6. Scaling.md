# Links

> Description of the autoscaling algorithm (Go directly to the autoscaling algorithm section):
> https://github.com/kubernetes/community/blob/master/contributors/design-proposals/autoscaling/horizontal-pod-autoscaler.md#autoscaling-algorithm
>
> Scaling the kubernetes pods based on kafka-streams metrics:
> https://medium.com/xebia-france/kafka-streams-a-road-to-autoscaling-via-kubernetes-417f2597439
>
> KEDA & Kubernetes event-driven autoscaling
> https://faun.pub/event-driven-autoscaling-for-kubernetes-with-kafka-keda-d68490200812
>
> Kubernetes API
> https://v1-18.docs.kubernetes.io/docs/reference/generated/kubernetes-api/v1.18/#-strong-status-operations-pod-v1-core-strong-
> https://kubernetes.io/docs/reference/kubernetes-api/workload-resources/pod-v1/

To run the kubernetes cluster locally start minikube. 

```bash
minikube start
```


The following command will make the kubernetes api available on port 6000.
```bash
kubectl proxy --port=6000
```


To create a deployment: 
```yaml
POST
http://localhost:6000/apis/apps/v1/namespaces/default/deployments

BODY
apiVersion: apps/v1
kind: Deployment
metadata:
  name: test-landau
spec:
  replicas: 1
  selector:
    matchLabels:
      app: hello-node
  template:
    metadata:
      labels:
        app: hello-node
    spec:
      containers:
      - name: hello-node-image
        image: k8s.gcr.io/echoserver:1.4
```


To scale an endpoint, perform a GET request to gather the information regarding the deployment. 

In this scenario: 
- namespace: default
- name: hello-node

```
GET 
http://localhost:6000/apis/apps/v1/namespaces/default/deployments/test-landau/scale
```

Modify the response payload in the spec.replicas field, and set the amount of replicas for the deployment: 

```
PUT
http://localhost:6000/apis/apps/v1/namespaces/default/deployments/test-landau/scale

BODY
{
    "kind": "Scale",
    "apiVersion": "autoscaling/v1",
    "metadata": {
        "name": "hello-node",
        "namespace": "default",
        "uid": "ac899ac6-12e2-4f4f-874f-0108c1c42e2e",
        "resourceVersion": "3155",
        "creationTimestamp": "2021-05-07T15:23:50Z"
    },
    "spec": {
        "replicas": 3
    },
    "status": {
        "replicas": 1,
        "selector": "app=hello-node"
    }
}
```
	